{"version":3,"file":"CategoryForm-69492f64.js","sources":["../../src/pages/Categories/CategoryForm.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { categoryApi } from \"../../api/categoryApi\";\r\nimport Input from \"../../components/form/input/InputField\";\r\n\r\ninterface CategoryFormData {\r\n  name: string;\r\n  description: string;\r\n  icon: string;\r\n  isActive: boolean;\r\n  sortOrder: number;\r\n}\r\n\r\nexport default function CategoryForm() {\r\n  const navigate = useNavigate();\r\n  const { categoryId } = useParams();\r\n  const isEditMode = Boolean(categoryId);\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [formData, setFormData] = useState<CategoryFormData>({\r\n    name: \"\",\r\n    description: \"\",\r\n    icon: \"\",\r\n    isActive: true,\r\n    sortOrder: 0,\r\n  });\r\n\r\n  const fetchCategoryDetails = useCallback(async () => {\r\n    try {\r\n      const categoryData = await categoryApi.getById(categoryId as string);\r\n      setFormData({\r\n        name: categoryData.name,\r\n        description: categoryData.description,\r\n        icon: categoryData.icon,\r\n        isActive: categoryData.isActive,\r\n        sortOrder: categoryData.sortOrder,\r\n      });\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.message || \"Failed to fetch category details\");\r\n      console.error(\"Error fetching category:\", err);\r\n    }\r\n  }, [categoryId]);\r\n\r\n  useEffect(() => {\r\n    if (isEditMode) {\r\n      fetchCategoryDetails();\r\n    }\r\n  }, [isEditMode, fetchCategoryDetails]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: name === 'isActive' ? (e.target as HTMLInputElement).checked : name === 'sortOrder' ? Number(value) : value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      if (isEditMode) {\r\n        await categoryApi.update(categoryId as string, formData);\r\n      } else {\r\n        await categoryApi.create(formData);\r\n      }\r\n      navigate(\"/categories\");\r\n    } catch (err: any) {\r\n      setError(err.response?.data?.message || `Failed to ${isEditMode ? 'update' : 'create'} category`);\r\n      console.error(`Error ${isEditMode ? 'updating' : 'creating'} category:`, err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"max-w-2xl mx-auto\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h1 className=\"text-2xl font-bold\">{isEditMode ? 'Edit Category' : 'Create New Category'}</h1>\r\n          <button\r\n            onClick={() => navigate(\"/categories\")}\r\n            className=\"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600\"\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-md\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-6 bg-white shadow-md rounded-lg p-6\">\r\n          <div>\r\n            <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Name *\r\n            </label>\r\n            <Input\r\n              id=\"name\"\r\n              name=\"name\"\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter category name\"\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Description *\r\n            </label>\r\n            <Input\r\n              id=\"description\"\r\n              name=\"description\"\r\n              type=\"text\"\r\n              value={formData.description}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter category description\"\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label htmlFor=\"isActive\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Active\r\n              </label>\r\n              <input\r\n                id=\"isActive\"\r\n                name=\"isActive\"\r\n                type=\"checkbox\"\r\n                checked={formData.isActive}\r\n                onChange={handleChange}\r\n                className=\"h-4 w-4\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"sortOrder\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Sort Order\r\n              </label>\r\n              <Input\r\n                id=\"sortOrder\"\r\n                name=\"sortOrder\"\r\n                type=\"number\"\r\n                value={formData.sortOrder}\r\n                onChange={handleChange}\r\n                placeholder=\"0\"\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"icon\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Icon *\r\n            </label>\r\n            <Input\r\n              id=\"icon\"\r\n              name=\"icon\"\r\n              type=\"text\"\r\n              value={formData.icon}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter icon name or URL\"\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex justify-end\">\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className={`px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 \r\n                ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n            >\r\n              {loading ? (isEditMode ? 'Updating...' : 'Creating...') : (isEditMode ? 'Update Category' : 'Create Category')}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":["CategoryForm","navigate","useNavigate","categoryId","useParams","isEditMode","loading","setLoading","useState","error","setError","formData","setFormData","fetchCategoryDetails","useCallback","categoryData","categoryApi","err","_b","_a","useEffect","handleChange","e","name","value","prev","handleSubmit","jsxs","jsx","Input"],"mappings":"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"}