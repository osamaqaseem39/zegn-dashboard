import{j as e}from"./ui-vendor-5f254887.js";import{r as a,L as S}from"./react-vendor-7917a9ce.js";import{b as V}from"./main-d9b0538d.js";import{I as O}from"./InputField-fcec1338.js";import"./utils-vendor-37919bfd.js";import"./helmet-vendor-3ee5617c.js";import"./cn-7854a74b.js";const h=o=>{if(!o)return"0.00";try{const r=parseFloat(o);return isNaN(r)?"0.00":r.toFixed(2)}catch(r){return console.error("Error formatting balance:",r),"0.00"}};function D({isOpen:o,onClose:r,balance:i,loading:g,error:p}){return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Balance Details"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g?e.jsx("div",{className:"text-center py-4",children:"Loading balance..."}):p?e.jsx("div",{className:"text-red-600 py-2",children:p}):i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Balance"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",h(i.totalBalance)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Cash Balance"}),e.jsxs("div",{className:"text-lg text-gray-800",children:["$",h(i.cashBalance)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Holdings Balance"}),e.jsxs("div",{className:"text-lg text-gray-800",children:["$",h(i.totalHoldingBalance)]})]})]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"All Time Profit"}),e.jsxs("div",{className:`text-lg font-semibold ${parseFloat(i.allTimeProfit)>=0?"text-green-600":"text-red-600"}`,children:["$",h(i.allTimeProfit)]})]})})]}):e.jsx("div",{className:"text-center py-4",children:"No balance information available"})]})}):null}function X(){const o=[{_id:"1",email:"alice@gmail.com",role:"admin",isActive:!0},{_id:"2",email:"bob@yahoo.com",role:"user",isActive:!1},{_id:"3",email:"carol@outlook.com",role:"user",isActive:!0},{_id:"4",email:"dave@hotmail.com",role:"user",isActive:!0},{_id:"5",email:"eve@gmail.com",role:"admin",isActive:!1},{_id:"6",email:"frank@icloud.com",role:"user",isActive:!0},{_id:"7",email:"grace@protonmail.com",role:"user",isActive:!0},{_id:"8",email:"heidi@yahoo.com",role:"user",isActive:!1},{_id:"9",email:"ivan@gmail.com",role:"user",isActive:!0},{_id:"10",email:"judy@outlook.com",role:"admin",isActive:!0},{_id:"11",email:"karl@gmail.com",role:"user",isActive:!1},{_id:"12",email:"laura@yahoo.com",role:"user",isActive:!0},{_id:"13",email:"mallory@protonmail.com",role:"user",isActive:!0},{_id:"14",email:"nancy@icloud.com",role:"user",isActive:!1},{_id:"15",email:"oliver@gmail.com",role:"admin",isActive:!0},{_id:"16",email:"peggy@hotmail.com",role:"user",isActive:!0},{_id:"17",email:"quinn@yahoo.com",role:"user",isActive:!1},{_id:"18",email:"ruth@outlook.com",role:"user",isActive:!0},{_id:"19",email:"sybil@gmail.com",role:"user",isActive:!0},{_id:"20",email:"trent@protonmail.com",role:"user",isActive:!1}],[r,i]=a.useState(o),[g,p]=a.useState(!1),[w,H]=a.useState(""),[m,B]=a.useState(""),[l,L]=a.useState({key:"",direction:"asc"}),[n,x]=a.useState(1),v=10,[P,k]=a.useState(!1),[$,y]=a.useState(null),[E,A]=a.useState(!1),[M,f]=a.useState(""),j=s=>{L(t=>({key:s,direction:t.key===s&&t.direction==="asc"?"desc":"asc"}))},b=s=>l.key!==s?"↕️":l.direction==="asc"?"↑":"↓",N=[...r].sort((s,t)=>{if(!l.key)return 0;const d=s[l.key],c=t[l.key];return d<c?l.direction==="asc"?-1:1:d>c?l.direction==="asc"?1:-1:0}).filter(s=>s.email.toLowerCase().includes(m.toLowerCase())||s.role.toLowerCase().includes(m.toLowerCase())),u=Math.ceil(N.length/v),_=n*v,U=_-v,C=N.slice(U,_);a.useEffect(()=>{x(1)},[m]);const I=()=>{const s=[];for(let t=1;t<=u;t++)s.push(e.jsx("button",{onClick:()=>x(t),className:`px-3 py-1 mx-1 rounded ${n===t?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:t},t));return s},F=async s=>{var t,d;k(!0),A(!0),f("");try{const c=await V.get(`/admin/user/balance/${s}`);y(c.data.body.balance)}catch(c){f(((d=(t=c.response)==null?void 0:t.data)==null?void 0:d.message)||"Failed to fetch balance"),console.error("Error fetching balance:",c),y(null)}finally{A(!1)}},T=()=>{k(!1),y(null),f("")};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Users"}),e.jsx(S,{to:"/users/add",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add New User"})]}),e.jsx("div",{className:"mb-4",children:e.jsx(O,{type:"text",placeholder:"Search users...",value:m,onChange:s=>B(s.target.value),className:"w-full md:w-64"})}),w&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-md",children:w}),g?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>j("email"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",children:["Email ",b("email")]}),e.jsxs("th",{onClick:()=>j("role"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",children:["Role ",b("role")]}),e.jsxs("th",{onClick:()=>j("isActive"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",children:["Status ",b("isActive")]}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.length>0?C.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded ${s.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:s.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[e.jsx("button",{onClick:()=>F(s._id),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Show Balance"}),e.jsx(S,{to:`/users/${s._id}`,className:"text-blue-600 hover:text-blue-900 mr-3",children:"View Details"})]})]},s._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})})})]})}),N.length>0&&e.jsxs("div",{className:"mt-4 flex justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>x(s=>Math.max(s-1,1)),disabled:n===1,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),I(),e.jsx("button",{onClick:()=>x(s=>Math.min(s+1,u)),disabled:n===u,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"Next"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",n," of ",u]})]})]}),e.jsx(D,{isOpen:P,onClose:T,balance:$,loading:E,error:M})]})}export{X as default};
//# sourceMappingURL=UserList-9cb6e2db.js.map
