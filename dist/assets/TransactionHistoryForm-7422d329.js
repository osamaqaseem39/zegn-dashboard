import{j as e}from"./ui-vendor-5f254887.js";import{u as z,r as m}from"./react-vendor-7917a9ce.js";import{I as d}from"./InputField-fcec1338.js";import{S as g}from"./SelectField-33f591af.js";import{C as N}from"./Checkbox-d2a0a2fe.js";import{t as M,A as h,b as V,a as X}from"./transactionApi-cba00695.js";import{B as u,C as c,a as w,b as k,c as o}from"./card-39566bda.js";import{B as C}from"./badge-e351bbbd.js";import{c as r}from"./check-75fcf2f7.js";import{C as S}from"./calendar-5fb274a3.js";import{C as T}from"./coins-a803ad37.js";import{T as W}from"./trending-up-6e615688.js";import"./cn-7854a74b.js";import"./utils-vendor-37919bfd.js";import"./main-d9b0538d.js";import"./helmet-vendor-3ee5617c.js";const _=r("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),A=r("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),F=r("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),$=r("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),G=r("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),J=r("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),D=r("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),xe=()=>{z();const[P,y]=m.useState(!1),[j,f]=m.useState(!1),[t,x]=m.useState({transactions:[],pagination:{page:1,limit:20,total:0,pages:0},filters:{search:"",type:"",status:"",tokenSymbol:"",dateFrom:"",dateTo:"",minAmount:"",maxAmount:"",includePending:!0,includeFailed:!0}});m.useEffect(()=>{E()},[t.filters,t.pagination.page]);const E=async()=>{try{y(!0);const a={page:t.pagination.page,limit:t.pagination.limit,type:t.filters.type,tokenSymbol:t.filters.tokenSymbol||void 0},s=await M.getTransactionHistory(a);x(i=>({...i,transactions:s.transactions,pagination:s.pagination}))}catch(a){console.error("Failed to load transactions:",a)}finally{y(!1)}},n=(a,s)=>{x(i=>({...i,filters:{...i.filters,[a]:s},pagination:{...i.pagination,page:1}}))},v=a=>{x(s=>({...s,pagination:{...s.pagination,page:a}}))},U=async()=>{try{f(!0),console.log("Exporting transactions with filters:",t.filters),await new Promise(s=>setTimeout(s,2e3));const a=L(t.transactions);B(a,"transactions.csv")}catch(a){console.error("Failed to export transactions:",a)}finally{f(!1)}},L=a=>{const s=["Date","Type","Token","Amount","Price","Status","Transaction Hash"],i=a.map(l=>[new Date(l.createdAt).toLocaleDateString(),l.type,l.tokenSymbol,l.amount,l.price,l.status,l.transactionHash||"N/A"]);return[s,...i].map(l=>l.join(",")).join(`
`)},B=(a,s)=>{const i=new Blob([a],{type:"text/csv"}),l=window.URL.createObjectURL(i),p=document.createElement("a");p.href=l,p.download=s,p.click(),window.URL.revokeObjectURL(l)},b=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),H=a=>{switch(a){case"buy":return e.jsx(X,{className:"h-4 w-4 text-green-600"});case"sell":return e.jsx(V,{className:"h-4 w-4 text-red-600"});case"swap":return e.jsx(h,{className:"h-4 w-4 text-blue-600"});default:return e.jsx(h,{className:"h-4 w-4 text-gray-600"})}},I=a=>{switch(a){case"completed":return e.jsx(A,{className:"h-4 w-4 text-green-600"});case"failed":return e.jsx(D,{className:"h-4 w-4 text-red-600"});case"pending":return e.jsx(F,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(_,{className:"h-4 w-4 text-gray-600"})}},R=[{value:"",label:"All Types"},{value:"buy",label:"Buy"},{value:"sell",label:"Sell"},{value:"swap",label:"Swap"},{value:"deposit",label:"Deposit"},{value:"withdrawal",label:"Withdrawal"}],q=[{value:"",label:"All Statuses"},{value:"completed",label:"Completed"},{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"failed",label:"Failed"},{value:"cancelled",label:"Cancelled"}],O=[{value:"",label:"All Tokens"},{value:"SOL",label:"Solana (SOL)"},{value:"ETH",label:"Ethereum (ETH)"},{value:"BTC",label:"Bitcoin (BTC)"},{value:"USDC",label:"USD Coin (USDC)"}];return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Transaction History"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"View and manage your trading transactions"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(u,{variant:"outline",onClick:U,disabled:j,className:"flex items-center space-x-2",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:j?"Exporting...":"Export CSV"})]})})]}),e.jsxs(c,{children:[e.jsx(w,{children:e.jsxs(k,{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-5 w-5"}),e.jsx("span",{children:"Filters"})]})}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{label:"Search",name:"search",value:t.filters.search,onChange:a=>n("search",a.target.value),placeholder:"Search transactions...",icon:e.jsx(J,{className:"h-4 w-4"})}),e.jsx(g,{label:"Transaction Type",name:"type",value:t.filters.type,onChange:a=>n("type",a.target.value),options:R,placeholder:"Select type"}),e.jsx(g,{label:"Status",name:"status",value:t.filters.status,onChange:a=>n("status",a.target.value),options:q,placeholder:"Select status"}),e.jsx(g,{label:"Token",name:"tokenSymbol",value:t.filters.tokenSymbol,onChange:a=>n("tokenSymbol",a.target.value),options:O,placeholder:"Select token"}),e.jsx(d,{label:"Date From",name:"dateFrom",type:"date",value:t.filters.dateFrom,onChange:a=>n("dateFrom",a.target.value),icon:e.jsx(S,{className:"h-4 w-4"})}),e.jsx(d,{label:"Date To",name:"dateTo",type:"date",value:t.filters.dateTo,onChange:a=>n("dateTo",a.target.value),icon:e.jsx(S,{className:"h-4 w-4"})}),e.jsx(d,{label:"Min Amount",name:"minAmount",type:"number",value:t.filters.minAmount,onChange:a=>n("minAmount",a.target.value),placeholder:"0.00",icon:e.jsx(T,{className:"h-4 w-4"})}),e.jsx(d,{label:"Max Amount",name:"maxAmount",type:"number",value:t.filters.maxAmount,onChange:a=>n("maxAmount",a.target.value),placeholder:"0.00",icon:e.jsx(T,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-6 mt-6",children:[e.jsx(N,{label:"Include Pending",name:"includePending",checked:t.filters.includePending,onChange:a=>n("includePending",typeof a=="boolean"?a:a.target.checked)}),e.jsx(N,{label:"Include Failed",name:"includeFailed",checked:t.filters.includeFailed,onChange:a=>n("includeFailed",typeof a=="boolean"?a:a.target.checked)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(W,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.pagination.total})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(A,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.transactions.filter(a=>a.status==="completed").length})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(F,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.transactions.filter(a=>a.status==="pending").length})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(D,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.transactions.filter(a=>a.status==="failed").length})]})]})})})]}),e.jsxs(c,{children:[e.jsx(w,{children:e.jsx(k,{children:"Recent Transactions"})}),e.jsx(o,{children:P?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500"})}):t.transactions.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(h,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No transactions found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your filters or make your first transaction."})]}):e.jsx("div",{className:"space-y-4",children:t.transactions.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:H(a.type)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium capitalize",children:a.type}),e.jsx(C,{variant:"outline",className:"text-xs",children:a.tokenSymbol})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(a.createdAt).toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:b(a.amount)}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["@ ",b(a.price)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[I(a.status),e.jsx(C,{variant:a.status==="completed"?"default":a.status==="pending"?"secondary":a.status==="failed"?"destructive":"outline",children:a.status})]})]})]},a._id))})})]}),t.pagination.pages>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(t.pagination.page-1)*t.pagination.limit+1," to"," ",Math.min(t.pagination.page*t.pagination.limit,t.pagination.total)," of"," ",t.pagination.total," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:()=>v(t.pagination.page-1),disabled:t.pagination.page===1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",t.pagination.page," of ",t.pagination.pages]}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>v(t.pagination.page+1),disabled:t.pagination.page===t.pagination.pages,children:"Next"})]})]})]})};export{xe as default};
//# sourceMappingURL=TransactionHistoryForm-7422d329.js.map
