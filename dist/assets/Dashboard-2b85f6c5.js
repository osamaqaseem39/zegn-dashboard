import{j as e,T as V,I as ye,S as $,a as G,P as Ne,C as Q,V as be,L as W,b as O,c as ve,d as we,e as Z,R as Se,f as ke,g as X,h as Te}from"./ui-vendor-5f254887.js";import{r}from"./react-vendor-7917a9ce.js";import{B as v,C as x,a as h,b as u,c as f}from"./card-39566bda.js";import{I as F}from"./input-70a34bae.js";import{c as p}from"./cn-7854a74b.js";import{C as Y,B}from"./badge-e351bbbd.js";import{c as g,C as Ce}from"./check-75fcf2f7.js";import{b as R,c as Re}from"./main-d9b0538d.js";import{t as D,A as q,a as L,b as M}from"./transactionApi-cba00695.js";import{t as z}from"./tokenApi-e0e806c7.js";import{T as De}from"./trending-up-6e615688.js";import"./utils-vendor-37919bfd.js";import"./helmet-vendor-3ee5617c.js";const Ae=g("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Pe=g("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Ue=g("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ie=g("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ee=g("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),Fe=Se,Be=ke,_=r.forwardRef(({className:a,children:n,...l},c)=>e.jsxs(V,{ref:c,className:p("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[n,e.jsx(ye,{asChild:!0,children:e.jsx(Y,{className:"h-4 w-4 opacity-50"})})]}));_.displayName=V.displayName;const J=r.forwardRef(({className:a,...n},l)=>e.jsx($,{ref:l,className:p("flex cursor-default items-center justify-center py-1",a),...n,children:e.jsx(Ae,{className:"h-4 w-4"})}));J.displayName=$.displayName;const K=r.forwardRef(({className:a,...n},l)=>e.jsx(G,{ref:l,className:p("flex cursor-default items-center justify-center py-1",a),...n,children:e.jsx(Y,{className:"h-4 w-4"})}));K.displayName=G.displayName;const ee=r.forwardRef(({className:a,children:n,position:l="popper",...c},w)=>e.jsx(Ne,{children:e.jsxs(Q,{ref:w,className:p("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",l==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...c,children:[e.jsx(J,{}),e.jsx(be,{className:p("p-1",l==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),e.jsx(K,{})]})}));ee.displayName=Q.displayName;const qe=r.forwardRef(({className:a,...n},l)=>e.jsx(W,{ref:l,className:p("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n}));qe.displayName=W.displayName;const se=r.forwardRef(({className:a,children:n,...l},c)=>e.jsxs(O,{ref:c,className:p("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ve,{children:e.jsx(Ce,{className:"h-4 w-4"})})}),e.jsx(we,{children:n})]}));se.displayName=O.displayName;const Le=r.forwardRef(({className:a,...n},l)=>e.jsx(Z,{ref:l,className:p("-mx-1 my-1 h-px bg-muted",a),...n}));Le.displayName=Z.displayName;const ae=r.forwardRef(({className:a,value:n,...l},c)=>e.jsx(X,{ref:c,className:p("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...l,children:e.jsx(Te,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(n||0)}%)`}})}));ae.displayName=X.displayName;const H={getReferralCode:async()=>(await R.get("/referrals/code")).data,getReferralStats:async()=>(await R.get("/referrals/stats")).data,getReferralEarnings:async()=>(await R.get("/referrals/earnings")).data},Je=()=>{const[a,n]=r.useState(null),[l,c]=r.useState([]),[w,te]=r.useState({}),[A,le]=r.useState([]),[o,re]=r.useState(null),[d,ne]=r.useState(null),[de,P]=r.useState(!0),[U,S]=r.useState(null),[m,ie]=r.useState(""),[j,I]=r.useState(""),[k,ce]=r.useState("1"),[y,E]=r.useState(null),[N,b]=r.useState(!1);r.useEffect(()=>{T()},[]);const T=async()=>{try{P(!0);const s=await Re.getProfile();n(s);const t=await z.getTokens();c(t);const C=t.map(ge=>ge.symbol),ue=await z.getTokenPrices(C);te(ue);const fe=await D.getTransactionHistory({limit:10});le(fe.transactions);const[pe,je]=await Promise.all([H.getReferralStats(),H.getReferralEarnings()]);re(pe),ne(je)}catch(s){S(s instanceof Error?s.message:"Failed to load dashboard data")}finally{P(!1)}},oe=async()=>{var s;if(!(!m||!j))try{b(!0);const t=await D.getQuote({fromTokenSymbol:"USDC",fromTokenAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",toTokenSymbol:m,toTokenAddress:((s=l.find(C=>C.symbol===m))==null?void 0:s.address)||"",amount:parseFloat(j),slippage:parseFloat(k)});E(t)}catch(t){S(t instanceof Error?t.message:"Failed to get quote")}finally{b(!1)}},me=async()=>{var s;if(!(!m||!j))try{b(!0),await D.buyToken({tokenSymbol:m,tokenAddress:((s=l.find(t=>t.symbol===m))==null?void 0:s.address)||"",amount:parseFloat(j),slippage:parseFloat(k)}),await T(),I(""),E(null)}catch(t){S(t instanceof Error?t.message:"Failed to buy token")}finally{b(!1)}},xe=async()=>{a!=null&&a.referralCode&&await navigator.clipboard.writeText(a.referralCode)},i=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),he=s=>`${s>=0?"+":""}${s.toFixed(2)}%`;return de?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):U?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:U}),e.jsx(v,{onClick:T,children:"Retry"})]})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",(a==null?void 0:a.firstName)||"User","!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's what's happening with your account"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(B,{variant:"outline",className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{children:i((a==null?void 0:a.balance)||0)})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(x,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Total Balance"}),e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i((a==null?void 0:a.balance)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for trading"})]})]}),e.jsxs(x,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Total Transactions"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),e.jsxs(x,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Total Referrals"}),e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.totalReferrals)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Active: ",(o==null?void 0:o.activeReferrals)||0]})]})]}),e.jsxs(x,{children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Total Earnings"}),e.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i((d==null?void 0:d.totalEarnings)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"From referrals"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Trade Tokens"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Token"}),e.jsxs(Fe,{value:m,onValueChange:ie,children:[e.jsx(_,{children:e.jsx(Be,{placeholder:"Select a token"})}),e.jsx(ee,{children:l.map(s=>e.jsx(se,{value:s.symbol,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:s.logoURI,alt:s.name,className:"w-4 h-4 rounded-full"}),e.jsx("span",{children:s.symbol})]})},s.symbol))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Amount (USDC)"}),e.jsx(F,{type:"number",placeholder:"0.00",value:j,onChange:s=>I(s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Slippage (%)"}),e.jsx(F,{type:"number",placeholder:"1",value:k,onChange:s=>ce(s.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(v,{onClick:oe,disabled:!m||!j||N,className:"w-full",children:N?"Loading...":"Get Quote"})})]}),y&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Quote"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Estimated Output:"}),e.jsxs("span",{className:"font-medium",children:[y.estimatedOutput.toFixed(6)," ",m]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Price Impact:"}),e.jsxs("span",{className:"font-medium",children:[y.price.toFixed(6)," USDC"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fee:"}),e.jsx("span",{className:"font-medium",children:i(y.fee)})]})]}),e.jsx(v,{onClick:me,disabled:N,className:"w-full mt-4",children:N?"Processing...":"Buy Token"})]})]})]})}),e.jsx("div",{children:e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Token Prices"})}),e.jsx(f,{children:e.jsx("div",{className:"space-y-3",children:l.map(s=>{const t=w[s.symbol];return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.logoURI,alt:s.name,className:"w-6 h-6 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.symbol}),e.jsx("div",{className:"text-sm text-gray-600",children:s.name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:i((t==null?void 0:t.price)||0)}),e.jsxs("div",{className:`text-sm flex items-center ${((t==null?void 0:t.change24h)||0)>=0?"text-green-600":"text-red-600"}`,children:[((t==null?void 0:t.change24h)||0)>=0?e.jsx(L,{className:"h-3 w-3 mr-1"}):e.jsx(M,{className:"h-3 w-3 mr-1"}),he((t==null?void 0:t.change24h)||0)]})]})]},s.symbol)})})})]})})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Recent Transactions"})}),e.jsx(f,{children:e.jsx("div",{className:"space-y-4",children:A.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-full ${s.type==="buy"?"bg-green-100":s.type==="sell"?"bg-red-100":"bg-blue-100"}`,children:s.type==="buy"?e.jsx(L,{className:"h-4 w-4 text-green-600"}):s.type==="sell"?e.jsx(M,{className:"h-4 w-4 text-red-600"}):e.jsx(q,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:s.type}),e.jsx("div",{className:"text-sm text-gray-600",children:s.tokenSymbol})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:i(s.amount)}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx(B,{variant:s.status==="completed"?"default":s.status==="pending"?"secondary":s.status==="failed"?"destructive":"outline",children:s.status})]},s._id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Referral Program"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Your Referral Code"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(a==null?void 0:a.referralCode)||"N/A"})]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:xe,children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.totalReferrals)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Referrals"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:i((d==null?void 0:d.totalEarnings)||0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Earnings"})]})]})]})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Earnings Overview"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Earnings"}),e.jsx("span",{className:"font-medium",children:i((d==null?void 0:d.totalEarnings)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pending"}),e.jsx("span",{className:"font-medium",children:i((d==null?void 0:d.pendingEarnings)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Paid"}),e.jsx("span",{className:"font-medium",children:i((d==null?void 0:d.paidEarnings)||0)})]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Progress to next payout"}),e.jsx("span",{children:"75%"})]}),e.jsx(ae,{value:75,className:"w-full"})]})]})]})]})]})};export{Je as default};
//# sourceMappingURL=Dashboard-2b85f6c5.js.map
