import{j as e}from"./ui-vendor-5f254887.js";import{j as U,r as a,L as T}from"./react-vendor-7917a9ce.js";import{b as D}from"./main-d9b0538d.js";import"./utils-vendor-37919bfd.js";import"./helmet-vendor-3ee5617c.js";const S={getMe:async()=>{const r=await D.get("/user/me");return r.data.user??r.data},getMyBalance:async r=>{const s=typeof r=="boolean"?`?isHoldings=${r}`:"";return(await D.get(`/user/balance${s}`)).data}};function H(){var y,v,w,B,E,I;const{userId:r}=U(),[s,m]=a.useState(null),[$,x]=a.useState(!0),[h,f]=a.useState(""),[c,C]=a.useState(!1),[i,p]=a.useState(null),[L,u]=a.useState(!1),[j,N]=a.useState(""),g=a.useCallback(async()=>{var t,n;x(!0);try{const l=await S.getMe();m(l),f("")}catch(l){f(((n=(t=l.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to fetch user details"),console.error("Error fetching user details:",l)}finally{x(!1)}},[r]),b=a.useCallback(async()=>{var t,n;u(!0),N("");try{const l=await S.getMyBalance();p(l)}catch(l){N(((n=(t=l.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to fetch balance"),console.error("Error fetching balance:",l),p(null)}finally{u(!1)}},[r]);a.useEffect(()=>{g()},[g]),a.useEffect(()=>{b()},[b]);const A=()=>{C(!c)},o=t=>new Date(t).toLocaleString(),d=t=>{if(!t)return"0.00";try{const n=parseFloat(t);return isNaN(n)?"0.00":n.toFixed(2)}catch(n){return console.error("Error formatting balance:",n),"0.00"}};return $?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."}):h?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-md p-4",children:h})}):s?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Details"}),e.jsx(T,{to:"/users",className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600",children:"Back to Users"})]}),e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Basic Information"}),e.jsx("button",{onClick:A,className:`px-4 py-2 rounded-lg text-white ${c?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"}`,children:c?"Hide Balance":"Show Balance"})]}),c&&e.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:L?e.jsx("div",{className:"text-center",children:"Loading balance..."}):j?e.jsx("div",{className:"text-red-600",children:j}):i?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Total Balance:"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["$",d(i.totalBalance)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Cash Balance:"}),e.jsxs("span",{className:"text-md text-gray-600",children:["$",d(i.cashBalance)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Holdings Balance:"}),e.jsxs("span",{className:"text-md text-gray-600",children:["$",d(i.totalHoldingBalance)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"All Time Profit:"}),e.jsxs("span",{className:`text-md ${parseFloat(i.allTimeProfit)>=0?"text-green-600":"text-red-600"}`,children:["$",d(i.allTimeProfit)]})]})]}):null}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",s.userName||"Not set"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Role:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded ${s.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:s.role||"user"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Referral Code:"})," ",s.referralCode||"-"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Notifications:"})," ",s.isEnableNotification?"Enabled":"Disabled"]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Dates"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",o(s.createdAt||"")]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",o(s.updatedAt||"")]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Wallet Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Wallet ID:"})," ",((y=s.walletInfo)==null?void 0:y.turnKeyWalletId)||"-"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",((v=s.walletInfo)==null?void 0:v.address)||"-"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Exported:"})," ",(w=s.walletInfo)!=null&&w.hasExported?"Yes":"No"]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Verification Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Export Code:"})," ",((B=s.exportVerificationInfo)==null?void 0:B.code)||"Not set"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Verification Code:"})," ",((E=s.verificationInfo)==null?void 0:E.code)||"Not set"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Validity Date:"}),(I=s.verificationInfo)!=null&&I.validityDateTime?o(s.verificationInfo.validityDateTime):"Not set"]})]})]})]})]})})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:"User not found"})})}export{H as default};
//# sourceMappingURL=UserDetail-1bb4fb46.js.map
