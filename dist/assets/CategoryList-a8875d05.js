import{j as e}from"./ui-vendor-5f254887.js";import{r as a,L as v}from"./react-vendor-7917a9ce.js";import{c as C}from"./categoryApi-a292d658.js";import{I as _}from"./InputField-fcec1338.js";import"./main-d9b0538d.js";import"./utils-vendor-37919bfd.js";import"./helmet-vendor-3ee5617c.js";import"./cn-7854a74b.js";function G(){const[k,y]=a.useState([]),[S,f]=a.useState(!1),[b,j]=a.useState(""),[x,A]=a.useState(""),[c,I]=a.useState({key:"",direction:"asc"}),[n,o]=a.useState(1),[d,m]=a.useState({show:!1,categoryId:"",categoryName:""}),g=10;a.useEffect(()=>{(async()=>{var s,r;try{f(!0);const i=await C.list();y(i)}catch(i){j(((r=(s=i.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to load categories")}finally{f(!1)}})()},[]);const L=(t,s)=>{m({show:!0,categoryId:t,categoryName:s})},D=async()=>{var t,s;try{await C.remove(d.categoryId),m({show:!1,categoryId:"",categoryName:""}),y(r=>r.filter(i=>i._id!==d.categoryId))}catch(r){j(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to delete category"),console.error("Error deleting category:",r)}},h=t=>{I(s=>({key:t,direction:s.key===t&&s.direction==="asc"?"desc":"asc"}))},p=t=>c.key!==t?"↕️":c.direction==="asc"?"↑":"↓",P=t=>new Date(t).toLocaleString(),u=[...k].sort((t,s)=>{if(!c.key)return 0;const r=t[c.key],i=s[c.key];return r<i?c.direction==="asc"?-1:1:r>i?c.direction==="asc"?1:-1:0}).filter(t=>t.name.toLowerCase().includes(x.toLowerCase())),l=Math.ceil(u.length/g),N=n*g,E=N-g,w=u.slice(E,N);a.useEffect(()=>{o(1)},[x]);const F=()=>{const t=[];for(let s=1;s<=l;s++)t.push(e.jsx("button",{onClick:()=>o(s),className:`px-3 py-1 mx-1 rounded ${n===s?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:s},s));return t};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Categories"}),e.jsx(v,{to:"/categories/add",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add New Category"})]}),e.jsx("div",{className:"mb-4",children:e.jsx(_,{type:"text",placeholder:"Search categories...",value:x,onChange:t=>A(t.target.value),className:"w-full md:w-64"})}),b&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-md",children:b}),S?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>h("name"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",children:["Name ",p("name")]}),e.jsxs("th",{onClick:()=>h("isActive"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",children:["Status ",p("isActive")]}),e.jsxs("th",{onClick:()=>h("createdAt"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",children:["Created At ",p("createdAt")]}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.length>0?w.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded ${t.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P(t.createdAt)}),e.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[e.jsx(v,{to:`/categories/edit/${t._id}`,className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>L(t._id,t.name),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No categories found"})})})]})}),u.length>0&&e.jsxs("div",{className:"mt-4 flex justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>o(t=>Math.max(t-1,1)),disabled:n===1,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),F(),e.jsx("button",{onClick:()=>o(t=>Math.min(t+1,l)),disabled:n===l,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"Next"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",n," of ",l]})]})]}),d.show&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md mx-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Delete"}),e.jsxs("p",{className:"mb-6",children:['Are you sure you want to delete the category "',d.categoryName,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:()=>m({show:!1,categoryId:"",categoryName:""}),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:D,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})})]})}export{G as default};
//# sourceMappingURL=CategoryList-a8875d05.js.map
