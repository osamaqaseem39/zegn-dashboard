import{j as e}from"./ui-vendor-5f254887.js";import{j as w,r as n,L as v}from"./react-vendor-7917a9ce.js";import{b as x,P as D}from"./main-d9b0538d.js";import"./utils-vendor-37919bfd.js";import"./helmet-vendor-3ee5617c.js";function $(){const{tokenAddress:c}=w(),[a,u]=n.useState(null),[g,p]=n.useState(!0),[l,d]=n.useState({}),[f,h]=n.useState(!1),[o,m]=n.useState(""),i=n.useCallback(async()=>{var t,r;try{p(!0);const s=await x.get(`/admin/token/${c}`);u(s.data.body.token)}catch(s){console.error(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to fetch token details")}finally{p(!1)}},[c]);n.useEffect(()=>{c&&i()},[c,i]);const j=()=>{a&&h(!0)},b=async()=>{var t,r;if(a){d(s=>({...s,activate:!0}));try{await x.put(`/admin/token/graph/cron/active/${a._id}`),await i()}catch(s){console.error(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to activate graph")}finally{d(s=>({...s,activate:!1}))}}},y=async()=>{var t,r;if(a){d(s=>({...s,latest:!0}));try{await x.put(`/admin/token/graph/allow/latest/${a._id}`),await i()}catch(s){console.error(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to update latest graph data")}finally{d(s=>({...s,latest:!1}))}}},N=async()=>{var t,r;if(!(!a||o!=="Delete Cron Data")){d(s=>({...s,delete:!0}));try{await x.delete(`/admin/token/graph/${a._id}`),await i(),h(!1),m("")}catch(s){console.error(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to delete data")}finally{d(s=>({...s,delete:!1}))}}};return g?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a?e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Token Cron"}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-6 flex justify-between items-center",children:e.jsx(v,{to:"/tokens",className:"text-blue-600 hover:text-blue-800",children:"← Back to Tokens"})}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:[a.name," (",a.symbol,") - Cron Status"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Token Address: ",a.tokenAddress]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Graph Data Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Cron Update:"}),e.jsx("span",{className:`px-2 py-1 rounded text-sm ${a.grapDataInfo.isCronUpdate?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.grapDataInfo.isCronUpdate?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Max Graph Data:"}),e.jsx("span",{className:`px-2 py-1 rounded text-sm ${a.grapDataInfo.isMaxGraphDataAdded?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.grapDataInfo.isMaxGraphDataAdded?"Added":"Pending"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"24h Graph Data:"}),e.jsx("span",{className:`px-2 py-1 rounded text-sm ${a.grapDataInfo.isOneDayGraphDataAdded?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.grapDataInfo.isOneDayGraphDataAdded?"Added":"Pending"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"4h Graph Data:"}),e.jsx("span",{className:`px-2 py-1 rounded text-sm ${a.grapDataInfo.isFourHourGraphDataAdded?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.grapDataInfo.isFourHourGraphDataAdded?"Added":"Pending"})]})]})]})})})]}),e.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden mt-6",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Manual Graph Updates"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:j,disabled:l.delete,className:`w-full p-4 rounded-lg flex items-center justify-between ${l.delete?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 h-8 flex items-center justify-center rounded-full border-2 mr-3",children:"1"}),l.delete?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting Data..."]}):"Delete Data"]}),(a==null?void 0:a.grapDataInfo.isMaxGraphDataAdded)&&e.jsx("span",{className:"text-green-500",children:"✓"})]}),e.jsxs("button",{onClick:b,disabled:l.activate,className:`w-full p-4 rounded-lg flex items-center justify-between ${l.activate?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 h-8 flex items-center justify-center rounded-full border-2 mr-3",children:"2"}),l.activate?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Activating Graph..."]}):"Activate Graph"]}),(a==null?void 0:a.grapDataInfo.isOneDayGraphDataAdded)&&e.jsx("span",{className:"text-green-500",children:"✓"})]}),e.jsxs("button",{onClick:y,disabled:l.latest,className:`w-full p-4 rounded-lg flex items-center justify-between ${l.latest?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 h-8 flex items-center justify-center rounded-full border-2 mr-3",children:"3"}),l.latest?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating Latest Graph Data..."]}):"Latest Graph Data"]}),(a==null?void 0:a.grapDataInfo.isFourHourGraphDataAdded)&&e.jsx("span",{className:"text-green-500",children:"✓"})]})]})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md mx-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Delete"}),e.jsxs("p",{className:"mb-6",children:["Please type ",e.jsx("strong",{children:'"Delete Cron Data"'})," to confirm."]}),e.jsx("input",{type:"text",value:o,onChange:t=>m(t.target.value),className:"w-full p-2 border border-gray-300 rounded mb-4"}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:()=>{h(!1),m("")},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:N,disabled:o!=="Delete Cron Data",className:`px-4 py-2 text-white rounded ${o==="Delete Cron Data"?"bg-red-600 hover:bg-red-700":"bg-gray-300 cursor-not-allowed"}`,children:"Confirm"})]})]})})]}):null}export{$ as default};
//# sourceMappingURL=TokenCron-f6c91bee.js.map
