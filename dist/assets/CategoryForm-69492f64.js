import{j as e}from"./ui-vendor-5f254887.js";import{u as j,j as v,r as c}from"./react-vendor-7917a9ce.js";import{c as x}from"./categoryApi-a292d658.js";import{I as d}from"./InputField-fcec1338.js";import"./main-d9b0538d.js";import"./utils-vendor-37919bfd.js";import"./helmet-vendor-3ee5617c.js";import"./cn-7854a74b.js";function D(){const h=j(),{categoryId:n}=v(),r=!!n,[m,p]=c.useState(!1),[u,g]=c.useState(""),[s,y]=c.useState({name:"",description:"",icon:"",isActive:!0,sortOrder:0}),b=c.useCallback(async()=>{var o,a;try{const t=await x.getById(n);y({name:t.name,description:t.description,icon:t.icon,isActive:t.isActive,sortOrder:t.sortOrder})}catch(t){g(((a=(o=t.response)==null?void 0:o.data)==null?void 0:a.message)||"Failed to fetch category details"),console.error("Error fetching category:",t)}},[n]);c.useEffect(()=>{r&&b()},[r,b]);const i=o=>{const{name:a,value:t}=o.target;y(l=>({...l,[a]:a==="isActive"?o.target.checked:a==="sortOrder"?Number(t):t}))},f=async o=>{var a,t;o.preventDefault(),p(!0),g("");try{r?await x.update(n,s):await x.create(s),h("/categories")}catch(l){g(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||`Failed to ${r?"update":"create"} category`),console.error(`Error ${r?"updating":"creating"} category:`,l)}finally{p(!1)}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:r?"Edit Category":"Create New Category"}),e.jsx("button",{onClick:()=>h("/categories"),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600",children:"Cancel"})]}),u&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-md",children:u}),e.jsxs("form",{onSubmit:f,className:"space-y-6 bg-white shadow-md rounded-lg p-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx(d,{id:"name",name:"name",type:"text",value:s.name,onChange:i,placeholder:"Enter category name",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx(d,{id:"description",name:"description",type:"text",value:s.description,onChange:i,placeholder:"Enter category description",className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"isActive",className:"block text-sm font-medium text-gray-700 mb-1",children:"Active"}),e.jsx("input",{id:"isActive",name:"isActive",type:"checkbox",checked:s.isActive,onChange:i,className:"h-4 w-4"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sortOrder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),e.jsx(d,{id:"sortOrder",name:"sortOrder",type:"number",value:s.sortOrder,onChange:i,placeholder:"0",className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"icon",className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon *"}),e.jsx(d,{id:"icon",name:"icon",type:"text",value:s.icon,onChange:i,placeholder:"Enter icon name or URL",className:"w-full"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:m,className:`px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 
                ${m?"opacity-50 cursor-not-allowed":""}`,children:m?r?"Updating...":"Creating...":r?"Update Category":"Create Category"})})]})]})})}export{D as default};
//# sourceMappingURL=CategoryForm-69492f64.js.map
